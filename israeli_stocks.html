<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×§×‘ ×× ×™×•×ª ×™×©×¨××œ×™×•×ª - ×•×™×–×•××œ×™×–×¦×™×” ××™× ×˜×¨××§×˜×™×‘×™×ª</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }

        .stat-card h3 {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-card .change {
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .change.positive {
            color: #4ade80;
        }

        .change.negative {
            color: #f87171;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-header h2 {
            font-size: 1.5em;
        }

        .chart-controls {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn.active {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .stocks-list {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            max-height: 600px;
            overflow-y: auto;
        }

        .stocks-list h2 {
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .stock-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .stock-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-5px);
        }

        .stock-item.active {
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.25);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-price {
            font-size: 1.2em;
            font-weight: bold;
        }

        .stock-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            opacity: 0.8;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1em;
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-box input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.25);
        }

        canvas {
            max-height: 400px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            text-align: center;
            padding: 20px;
            opacity: 0.7;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ˆ ××¢×§×‘ ×× ×™×•×ª ×™×©×¨××œ×™×•×ª</h1>
            <p>×•×™×–×•××œ×™×–×¦×™×” ××™× ×˜×¨××§×˜×™×‘×™×ª ×‘×–××Ÿ ×××ª</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>××“×“ ×ª×œ ××‘×™×‘ 35</h3>
                <div class="value" id="ta35">1,234.56</div>
                <div class="change positive" id="ta35Change">
                    <span>â–²</span> <span>+12.34 (1.01%)</span>
                </div>
            </div>
            <div class="stat-card">
                <h3>××“×“ ×ª×œ ××‘×™×‘ 125</h3>
                <div class="value" id="ta125">1,567.89</div>
                <div class="change positive" id="ta125Change">
                    <span>â–²</span> <span>+8.76 (0.56%)</span>
                </div>
            </div>
            <div class="stat-card">
                <h3>×××•×¦×¢ ×©×™× ×•×™ ×™×•××™</h3>
                <div class="value" id="avgChange">+0.85%</div>
                <div class="change positive" id="avgChangeIndicator">
                    <span>â–²</span> <span>×©×•×§ ×—×™×•×‘×™</span>
                </div>
            </div>
            <div class="stat-card">
                <h3>× ×¤×— ××¡×—×¨</h3>
                <div class="value" id="volume">â‚ª2.5B</div>
                <div class="change" style="opacity: 0.8;">
                    <span>×¢×“×›×•×Ÿ ××—×¨×•×Ÿ: <span id="lastUpdate">--:--</span></span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="chart-container">
                <div class="chart-header">
                    <h2 id="chartTitle">×’×¨×£ ××—×™×¨×™× - <span id="selectedStockName">×ª×œ ××‘×™×‘ 35</span></h2>
                    <div class="chart-controls">
                        <button class="btn active" data-period="1d">×™×•×</button>
                        <button class="btn" data-period="1w">×©×‘×•×¢</button>
                        <button class="btn" data-period="1m">×—×•×“×©</button>
                        <button class="btn" data-period="3m">3 ×—×•×“×©×™×</button>
                    </div>
                </div>
                <canvas id="priceChart"></canvas>
            </div>

            <div class="stocks-list">
                <h2>×× ×™×•×ª</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="×—×¤×© ×× ×™×”...">
                </div>
                <div id="stocksContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // × ×ª×•× ×™ ×× ×™×•×ª ×™×©×¨××œ×™×•×ª (×¡×™××•×œ×¦×™×”)
        const stocksData = [
            { symbol: 'TA35', name: '×ª×œ ××‘×™×‘ 35', price: 1234.56, change: 12.34, changePercent: 1.01, volume: 2500000 },
            { symbol: 'TA125', name: '×ª×œ ××‘×™×‘ 125', price: 1567.89, change: 8.76, changePercent: 0.56, volume: 1800000 },
            { symbol: 'TEVA', name: '×˜×‘×¢', price: 45.23, change: -0.67, changePercent: -1.46, volume: 450000 },
            { symbol: 'BANK', name: '×‘× ×§ ×”×¤×•×¢×œ×™×', price: 28.90, change: 0.45, changePercent: 1.58, volume: 320000 },
            { symbol: 'LEUMI', name: '×‘× ×§ ×œ××•××™', price: 32.15, change: 0.23, changePercent: 0.72, volume: 280000 },
            { symbol: 'DISK', name: '×“×™×¡×§×•× ×˜', price: 19.87, change: -0.12, changePercent: -0.60, volume: 210000 },
            { symbol: 'MZTF', name: '××–×¨×—×™', price: 156.78, change: 2.34, changePercent: 1.52, volume: 150000 },
            { symbol: 'CEL', name: '×¡×œ×§×•×', price: 67.45, change: 1.23, changePercent: 1.86, volume: 380000 },
            { symbol: 'PTNR', name: '×¤×¨×˜× ×¨', price: 23.56, change: -0.45, changePercent: -1.87, volume: 290000 },
            { symbol: 'BEZQ', name: '×‘×–×§', price: 34.12, change: 0.67, changePercent: 2.00, volume: 270000 },
            { symbol: 'ELRN', name: '××œ×¨×•×Ÿ', price: 89.34, change: 1.45, changePercent: 1.65, volume: 190000 },
            { symbol: 'NICE', name: '× ×™×™×¡', price: 234.56, change: 3.21, changePercent: 1.39, volume: 120000 },
            { symbol: 'CHKP', name: '×¦\'×§ ×¤×•×™× ×˜', price: 145.67, change: -2.34, changePercent: -1.58, volume: 180000 },
            { symbol: 'WIX', name: '×•×™×§×¡', price: 78.90, change: 0.98, changePercent: 1.26, volume: 220000 },
            { symbol: 'FRSX', name: '×¤×¨×¡×™×§×¡', price: 12.34, change: -0.23, changePercent: -1.83, volume: 310000 },
            { symbol: 'MNDY', name: '×× ×“×™', price: 156.78, change: 2.45, changePercent: 1.59, volume: 140000 },
            { symbol: 'RDWR', name: '×¨×“×•×•×¨', price: 45.67, change: 0.89, changePercent: 2.00, volume: 160000 },
            { symbol: 'WKHS', name: '×•×•×¨×§×”××•×¡', price: 23.45, change: -0.34, changePercent: -1.43, volume: 250000 },
            { symbol: 'RADA', name: '×¨×“×', price: 67.89, change: 1.12, changePercent: 1.68, volume: 170000 },
            { symbol: 'INMD', name: '××™× ××•×“', price: 34.56, change: 0.45, changePercent: 1.32, volume: 200000 }
        ];

        let selectedStock = stocksData[0];
        let currentPeriod = '1d';
        let priceChart = null;
        let priceHistory = {};

        // ×™×¦×™×¨×ª ×”×™×¡×˜×•×¨×™×™×ª ××—×™×¨×™× ×¡×™××•×œ×¦×™×”
        function generatePriceHistory(symbol, period) {
            if (!priceHistory[symbol]) {
                priceHistory[symbol] = {};
            }
            
            if (priceHistory[symbol][period]) {
                return priceHistory[symbol][period];
            }

            const stock = stocksData.find(s => s.symbol === symbol);
            if (!stock) return [];

            const basePrice = stock.price;
            const points = period === '1d' ? 24 : period === '1w' ? 35 : period === '1m' ? 30 : 90;
            const history = [];
            const volatility = Math.abs(stock.changePercent) / 100;

            for (let i = 0; i < points; i++) {
                const progress = i / (points - 1);
                const randomFactor = (Math.random() - 0.5) * volatility * 2;
                const trend = stock.changePercent > 0 ? progress * 0.5 : -progress * 0.5;
                const price = basePrice * (1 + trend + randomFactor);
                history.push({
                    time: new Date(Date.now() - (points - i) * (period === '1d' ? 3600000 : period === '1w' ? 14400000 : 86400000)),
                    price: Math.max(price * 0.8, price * 1.2)
                });
            }

            priceHistory[symbol][period] = history;
            return history;
        }

        // ×™×¦×™×¨×ª ×’×¨×£
        function createChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            const history = generatePriceHistory(selectedStock.symbol, currentPeriod);
            
            if (priceChart) {
                priceChart.destroy();
            }

            priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: history.map((_, i) => {
                        const date = history[i].time;
                        if (currentPeriod === '1d') {
                            return date.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });
                        } else if (currentPeriod === '1w') {
                            return date.toLocaleDateString('he-IL', { weekday: 'short' });
                        } else {
                            return date.toLocaleDateString('he-IL', { month: 'short', day: 'numeric' });
                        }
                    }),
                    datasets: [{
                        label: '××—×™×¨',
                        data: history.map(h => h.price.toFixed(2)),
                        borderColor: selectedStock.changePercent >= 0 ? '#4ade80' : '#f87171',
                        backgroundColor: selectedStock.changePercent >= 0 ? 'rgba(74, 222, 128, 0.1)' : 'rgba(248, 113, 113, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: {
                                size: 14
                            },
                            bodyFont: {
                                size: 12
                            },
                            callbacks: {
                                label: function(context) {
                                    return '××—×™×¨: â‚ª' + context.parsed.y.toFixed(2);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                callback: function(value) {
                                    return 'â‚ª' + value.toFixed(0);
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        }

        // ×¢×“×›×•×Ÿ ×¨×©×™××ª ×”×× ×™×•×ª
        function renderStocks(filter = '') {
            const container = document.getElementById('stocksContainer');
            const filtered = stocksData.filter(stock => 
                stock.name.includes(filter) || stock.symbol.includes(filter.toUpperCase())
            );

            container.innerHTML = filtered.map(stock => `
                <div class="stock-item ${stock.symbol === selectedStock.symbol ? 'active' : ''}" 
                     data-symbol="${stock.symbol}">
                    <div class="stock-header">
                        <div class="stock-name">${stock.name} (${stock.symbol})</div>
                        <div class="stock-price">â‚ª${stock.price.toFixed(2)}</div>
                    </div>
                    <div class="stock-details">
                        <span class="change ${stock.changePercent >= 0 ? 'positive' : 'negative'}">
                            ${stock.changePercent >= 0 ? 'â–²' : 'â–¼'} 
                            ${Math.abs(stock.change).toFixed(2)} 
                            (${stock.changePercent >= 0 ? '+' : ''}${stock.changePercent.toFixed(2)}%)
                        </span>
                        <span>× ×¤×—: ${(stock.volume / 1000).toFixed(0)}K</span>
                    </div>
                </div>
            `).join('');

            // ×”×•×¡×¤×ª ×××–×™× ×™×
            container.querySelectorAll('.stock-item').forEach(item => {
                item.addEventListener('click', () => {
                    const symbol = item.dataset.symbol;
                    selectedStock = stocksData.find(s => s.symbol === symbol);
                    document.getElementById('selectedStockName').textContent = selectedStock.name;
                    document.querySelectorAll('.stock-item').forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    createChart();
                });
            });
        }

        // ×¢×“×›×•×Ÿ ×¡×˜×˜×™×¡×˜×™×§×•×ª
        function updateStats() {
            const ta35 = stocksData.find(s => s.symbol === 'TA35');
            const ta125 = stocksData.find(s => s.symbol === 'TA125');
            
            document.getElementById('ta35').textContent = ta35.price.toFixed(2);
            document.getElementById('ta35Change').innerHTML = `
                <span>${ta35.changePercent >= 0 ? 'â–²' : 'â–¼'}</span>
                <span>${ta35.changePercent >= 0 ? '+' : ''}${ta35.change.toFixed(2)} (${ta35.changePercent >= 0 ? '+' : ''}${ta35.changePercent.toFixed(2)}%)</span>
            `;
            document.getElementById('ta35Change').className = `change ${ta35.changePercent >= 0 ? 'positive' : 'negative'}`;

            document.getElementById('ta125').textContent = ta125.price.toFixed(2);
            document.getElementById('ta125Change').innerHTML = `
                <span>${ta125.changePercent >= 0 ? 'â–²' : 'â–¼'}</span>
                <span>${ta125.changePercent >= 0 ? '+' : ''}${ta125.change.toFixed(2)} (${ta125.changePercent >= 0 ? '+' : ''}${ta125.changePercent.toFixed(2)}%)</span>
            `;
            document.getElementById('ta125Change').className = `change ${ta125.changePercent >= 0 ? 'positive' : 'negative'}`;

            const avgChange = stocksData.reduce((sum, s) => sum + s.changePercent, 0) / stocksData.length;
            document.getElementById('avgChange').textContent = `${avgChange >= 0 ? '+' : ''}${avgChange.toFixed(2)}%`;
            document.getElementById('avgChangeIndicator').innerHTML = `
                <span>${avgChange >= 0 ? 'â–²' : 'â–¼'}</span>
                <span>${avgChange >= 0 ? '×©×•×§ ×—×™×•×‘×™' : '×©×•×§ ×©×œ×™×œ×™'}</span>
            `;
            document.getElementById('avgChangeIndicator').className = `change ${avgChange >= 0 ? 'positive' : 'negative'}`;

            const totalVolume = stocksData.reduce((sum, s) => sum + s.volume, 0);
            document.getElementById('volume').textContent = `â‚ª${(totalVolume / 1000000).toFixed(1)}B`;
        }

        // ×¡×™××•×œ×¦×™×” ×©×œ ×¢×“×›×•× ×™ ××—×™×¨×™×
        function simulatePriceUpdates() {
            setInterval(() => {
                stocksData.forEach(stock => {
                    const change = (Math.random() - 0.5) * stock.price * 0.02;
                    stock.price = Math.max(0.01, stock.price + change);
                    stock.change = change;
                    stock.changePercent = (change / (stock.price - change)) * 100;
                    stock.volume += Math.floor(Math.random() * 10000 - 5000);
                    stock.volume = Math.max(0, stock.volume);
                });

                // ×¢×“×›×•×Ÿ ×”×™×¡×˜×•×¨×™×”
                Object.keys(priceHistory).forEach(symbol => {
                    Object.keys(priceHistory[symbol]).forEach(period => {
                        const history = priceHistory[symbol][period];
                        if (history && history.length > 0) {
                            const lastPrice = history[history.length - 1].price;
                            const stock = stocksData.find(s => s.symbol === symbol);
                            if (stock) {
                                history.push({
                                    time: new Date(),
                                    price: stock.price
                                });
                                history.shift();
                            }
                        }
                    });
                });

                updateStats();
                renderStocks(document.getElementById('searchInput').value);
                if (priceChart) {
                    createChart();
                }

                const now = new Date();
                document.getElementById('lastUpdate').textContent = 
                    now.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });
            }, 5000); // ×¢×“×›×•×Ÿ ×›×œ 5 ×©× ×™×•×ª
        }

        // ××ª×—×•×œ
        function init() {
            updateStats();
            renderStocks();
            createChart();

            // ×›×¤×ª×•×¨×™ ×ª×§×•×¤×”
            document.querySelectorAll('.chart-controls .btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.chart-controls .btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentPeriod = btn.dataset.period;
                    createChart();
                });
            });

            // ×—×™×¤×•×©
            document.getElementById('searchInput').addEventListener('input', (e) => {
                renderStocks(e.target.value);
            });

            // ×¢×“×›×•×Ÿ ×–××Ÿ
            const now = new Date();
            document.getElementById('lastUpdate').textContent = 
                now.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });

            // ×”×ª×—×œ×ª ×¡×™××•×œ×¦×™×”
            simulatePriceUpdates();
        }

        // ×”×¤×¢×œ×”
        init();
    </script>
</body>
</html>
